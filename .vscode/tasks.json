{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "nm",
            "type": "shell",
            "command": "toolchain/gcc-arm-none-eabi/bin/arm-none-eabi-nm",
            "args": [
                "components/logue_sdk_v2rs/dist/libnts1mkii.a",
                "|",
                "tee",
                "dist/nts1mkii-rust-wave.nm.txt"
            ],
            "problemMatcher": []
        },
        {
            "label": "objdump",
            "type": "shell",
            "command": "toolchain/gcc-arm-none-eabi/bin/arm-none-eabi-objdump",
            "args": [
                "-D",
                "target/thumbv7em-none-eabihf/release/osc_waves",
                "|",
                "tee",
                "dist/nts1mkii-rust-wave.objdump.txt"
            ],
            "problemMatcher": []
        },
        {
            "label": "readelf",
            "type": "shell",
            "command": "readelf",
            "args": [
                "-a",
                "target/thumbv7em-none-eabihf/release/osc_waves",
                "|",
                "tee",
                "dist/nts1mkii-rust-wave.readelf.txt"
            ],
            "problemMatcher": []
        },
        {
            "label": "Distribute (WSL2)",
            "type": "shell",
            "dependsOn" : [
                "elf-patch",
            ],
            "command": "cp",
            "args": [
                "-p",
                "target/thumbv7em-none-eabihf/release/osc_waves",
                "/mnt/c/Users/${env:USER}/Downloads/osc_waves.nts1mkiiunit",
            ],
            "problemMatcher": []
        },
        {
            "label": "Distribute (UNIX)",
            "type": "shell",
            "dependsOn" : [
                "elf-patch",
            ],
            "command": "cp",
            "args": [
                "-p",
                "target/thumbv7em-none-eabihf/release/osc_waves",
                "dist/osc_waves.nts1mkiiunit",
            ],
            "problemMatcher": []
        },
        {
            "label": "elf-patch",
            "type": "shell",
            "command": "printf",
            "args": [
                "'\\x00'",
                "|",
                "dd",
                "of=target/thumbv7em-none-eabihf/release/osc_waves",
                "bs=1",
                "seek=7",
                "count=1",
                "conv=notrunc",
            ],
            "problemMatcher": []
        },
        {
            "label": "Deploy to nts1mkii (py-logue-tools)",
            "type": "shell",
            "dependsOn" : [
                "Distribute (UNIX)",
            ],
            "command": "py-logue-tools",
            "args": [
                "-p2",
                "--type",
                "NTS1Mk2",
                "install",
                "-f",
                "dist/osc_waves.nts1mkiiunit",
                "-m",
                "osc",
                "-s",
                "2"
            ],
            "problemMatcher": []
        }
    ]
}
