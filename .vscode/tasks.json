{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "nm",
            "type": "shell",
            "command": "toolchain/gcc-arm-none-eabi/bin/arm-none-eabi-nm",
            "args": [
                "dist/libnts1mkii.a",
                "|",
                "tee",
                "dist/nts1mkii-rust-wave.nm.txt"
            ],
            "problemMatcher": []
        },
        {
            "label": "objdump",
            "type": "shell",
            "command": "toolchain/gcc-arm-none-eabi/bin/arm-none-eabi-objdump",
            "args": [
                "-D",
                "target/thumbv7em-none-eabihf/release/nts1mkii-rust-wave",
                "|",
                "tee",
                "dist/nts1mkii-rust-wave.objdump.txt"
            ],
            "problemMatcher": []
        },
        {
            "label": "readelf",
            "type": "shell",
            "command": "readelf",
            "args": [
                "-a",
                "target/thumbv7em-none-eabihf/release/nts1mkii-rust-wave",
                "|",
                "tee",
                "dist/nts1mkii-rust-wave.readelf.txt"
            ],
            "problemMatcher": []
        },
        {
            "label": "upload (WSL2)",
            "type": "shell",
            "dependsOn" : [
                "elf-patch",
            ],
            "command": "cp",
            "args": [
                "-p",
                "target/thumbv7em-none-eabihf/release/nts1mkii-rust-wave",
                "/mnt/c/Users/${env:USER}/Downloads/nts1mkii-rust-wave.nts1mkiiunit",
            ],
            "problemMatcher": []
        },
        {
            "label": "upload (UNIX)",
            "type": "shell",
            "dependsOn" : [
                "elf-patch",
            ],
            "command": "cp",
            "args": [
                "-p",
                "target/thumbv7em-none-eabihf/release/nts1mkii-rust-wave",
                "dist/nts1mkii-rust-wave.nts1mkiiunit",
            ],
            "problemMatcher": []
        },
        {
            "label": "elf-patch",
            "type": "shell",
            "dependsOn" : [
                "strip",
            ],
            "command": "printf",
            "args": [
                "'\\x00'",
                "|",
                "dd",
                "of=target/thumbv7em-none-eabihf/release/nts1mkii-rust-wave",
                "bs=1",
                "seek=7",
                "count=1",
                "conv=notrunc",
            ],
            "problemMatcher": []
        },
        {
            "label": "strip",
            "type": "shell",
            "command": "toolchain/gcc-arm-none-eabi/bin/arm-none-eabi-strip",
            "args": [
                "--remove-section=.debug*",
                "target/thumbv7em-none-eabihf/release/nts1mkii-rust-wave"
            ],
            "problemMatcher": []
        },
    ]
}
